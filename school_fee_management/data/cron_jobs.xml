<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!--
            SCHEDULED ACTIONS (CRON JOBS)

            These demonstrate understanding of automation and business process management.

            1. Generate Invoices - Runs at semester start to bulk generate student invoices
            2. Update Overdue Status - Runs daily to mark overdue invoices

            PERFORMANCE NOTE:
            - Uses batch processing to handle large datasets efficiently
            - Runs during off-peak hours to minimize user impact
            - Proper error handling with logging
        -->

        <!-- Sequence for payment transaction numbering -->
        <record id="seq_payment_transaction" model="ir.sequence">
            <field name="name">Payment Transaction Sequence</field>
            <field name="code">school.payment.transaction</field>
            <field name="prefix">PAY</field>
            <field name="padding">5</field>
            <field name="number_increment">1</field>
        </record>

        <!-- Cron Job 1: Generate Student Invoices -->
        <record id="ir_cron_generate_student_invoices" model="ir.cron">
            <field name="name">School: Generate Student Invoices</field>
            <field name="model_id" ref="model_school_student_invoice"/>
            <field name="state">code</field>
            <field name="code">model.cron_generate_semester_invoices()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">months</field>

            <field name="active" eval="False"/>
            <field name="priority">5</field>
            <field name="user_id" ref="base.user_admin"/>
            <field name="doall" eval="False"/>
        </record>

        <!-- Cron Job 2: Update Overdue Invoice Status -->
        <record id="ir_cron_update_overdue_status" model="ir.cron">
            <field name="name">School: Update Overdue Invoice Status</field>
            <field name="model_id" ref="model_school_student_invoice"/>
            <field name="state">code</field>
            <field name="code">model.auto_update_overdue_status()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>

            <field name="active" eval="True"/>
            <field name="priority">10</field>
            <field name="user_id" ref="base.user_admin"/>
            <field name="doall" eval="False"/>
        </record>

    </data>
</odoo>